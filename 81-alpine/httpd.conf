ServerTokens Prod
ServerSignature Off
ServerAdmin dev@mvstudio.be
ServerRoot /var/www
ServerName localhost
Listen 0.0.0.0:80

LoadFile /usr/lib/libxml2.so
LoadFile /usr/lib/lua5.3/liblua-5.3.so.0.0.0

LoadModule authz_core_module /usr/lib/apache2/mod_authz_core.so
LoadModule deflate_module /usr/lib/apache2/mod_deflate.so
LoadModule dir_module /usr/lib/apache2/mod_dir.so
LoadModule env_module /usr/lib/apache2/mod_env.so
LoadModule dumpio_module /usr/lib/apache2/mod_dumpio.so
LoadModule expires_module /usr/lib/apache2/mod_expires.so
LoadModule filter_module /usr/lib/apache2/mod_filter.so
LoadModule headers_module /usr/lib/apache2/mod_headers.so
LoadModule log_config_module /usr/lib/apache2/mod_log_config.so
LoadModule mime_module /usr/lib/apache2/mod_mime.so
LoadModule mpm_prefork_module /usr/lib/apache2/mod_mpm_prefork.so
LoadModule negotiation_module /usr/lib/apache2/mod_negotiation.so
LoadModule php_module /usr/lib/apache2/mod_php81.so
LoadModule reqtimeout_module /usr/lib/apache2/mod_reqtimeout.so
LoadModule rewrite_module /usr/lib/apache2/mod_rewrite.so
LoadModule security2_module /usr/local/modsecurity/lib/mod_security2.so
LoadModule setenvif_module /usr/lib/apache2/mod_setenvif.so
LoadModule status_module /usr/lib/apache2/mod_status.so
LoadModule unique_id_module /usr/lib/apache2/mod_unique_id.so
LoadModule unixd_module /usr/lib/apache2/mod_unixd.so

<IfModule unixd_module>
  User apache
  Group apache
</IfModule>

<Directory />
    AllowOverride none
    Require all denied
</Directory>

DocumentRoot "/var/www/html"
<Directory "/var/www/html">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory>

<IfModule dir_module>
    DirectoryIndex index.php index.html
    AddHandler application/x-httpd-php .php
    AddHandler application/x-httpd-php-source .phps
</IfModule>

<Files ".ht*">
    Require all denied
</Files>

ErrorLog /dev/stderr
LogLevel warn

<IfModule log_config_module>
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common
    CustomLog /dev/stdout combined
</IfModule>

<IfModule mime_module>
    TypesConfig /etc/apache2/mime.types

    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
</IfModule>

<IfModule dumpio_module>
    DumpIOInput ${HTTPD_DUMPIO_INPUT}
    DumpIOOutput ${HTTPD_DUMPIO_OUTPUT}
    LogLevel dumpio:trace7
</IfModule>

<IfModule status_module>
    <Location /_httpd>
        SetHandler server-status
        Require all granted
    </Location>
</IfModule>

# Import ModSecurity configs
IncludeOptional /etc/modsecurity/modsecurity.conf
IncludeOptional /etc/modsecurity/coreruleset-3.3.2/crs-setup.conf
IncludeOptional /etc/modsecurity/coreruleset-3.3.2/rules/*.conf

IncludeOptional /etc/apache2/conf.d/default.conf
IncludeOptional /etc/apache2/conf.d/languages.conf
IncludeOptional /etc/apache2/conf.d/mpm.conf
IncludeOptional /etc/apache2/conf.d/custom.conf
